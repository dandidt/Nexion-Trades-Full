<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Statistical Details</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    .card {
      width: 100%;
      max-width: 400px;
      background: #0f0f0f;
      border: 1px solid #2a2a2a;
      border-radius: 1rem;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      overflow: hidden;
    }

    .header {
      padding: 1.5rem;
    }

    .header-title {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
    }

    .header-icon {
      width: 20px;
      height: 20px;
      color: #6b7280;
    }

    .header-title h2 {
      font-size: 1rem;
      font-weight: 600;
      color: white;
    }

    .header-desc {
      font-size: 0.875rem;
      color: #6b7280;
      line-height: 1.5;
    }

    .header-desc span {
      color: white;
    }

    .chart-container {
      padding: 0 1.5rem 1.5rem;
      position: relative;
    }

    #chart {
      width: 100%;
      height: 280px;
      cursor: crosshair;
    }

    .tooltip {
      position: absolute;
      background: rgba(31, 41, 55, 0.9);
      border: 1px solid #374151;
      border-radius: 0.5rem;
      padding: 0.5rem 0.75rem;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.2s;
      z-index: 10;
      transform: translateX(-50%);
    }

    .tooltip.active {
      opacity: 1;
    }

    .tooltip-value {
      font-size: 1rem;
      font-weight: 600;
      color: white;
      margin-bottom: 0.125rem;
    }

    .tooltip-profit {
      font-size: 0.875rem;
      color: #22c55e;
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.75rem;
      margin-top: 1.5rem;
    }

    .stat-item {
      padding: 0.5rem;
    }

    .stat-label {
      font-size: 0.75rem;
      color: #6b7280;
      margin-bottom: 0.125rem;
    }

    .stat-value {
      font-size: 1rem;
      font-weight: 600;
      color: white;
    }

    .stat-value.green {
      color: #22c55e;
    }
  </style>
</head>
<body>
  <div class="card">
    <div class="header">
      <div class="header-title">
        <svg class="header-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
        </svg>
        <h2>Statistical Details</h2>
      </div>
      <p class="header-desc">
        Track your trades with <span>interactive charts</span> and <span>stats</span>
      </p>
    </div>

    <div class="chart-container">
      <canvas id="chart"></canvas>
      <div class="tooltip" id="tooltip">
        <div class="tooltip-value" id="tooltipValue"></div>
        <div class="tooltip-profit" id="tooltipProfit"></div>
      </div>

      <div class="stats">
        <div class="stat-item">
          <div class="stat-label">Total Trades</div>
          <div class="stat-value">604</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Win Rate</div>
          <div class="stat-value green">68%</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Profit</div>
          <div class="stat-value green">$18K</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    var data = [
      { label: 'Jan', value: 45, profit: 1200 },
      { label: 'Feb', value: 52, profit: 1450 },
      { label: 'Mar', value: 38, profit: 980 },
      { label: 'Apr', value: 65, profit: 1890 },
      { label: 'May', value: 58, profit: 1650 },
      { label: 'Jun', value: 70, profit: 2100 },
      { label: 'Jul', value: 62, profit: 1820 },
      { label: 'Aug', value: 75, profit: 2350 },
      { label: 'Aug', value: 75, profit: 2350 },
      { label: 'Sep', value: 68, profit: 1980 },
      { label: 'Oct', value: 80, profit: 2500 }
    ];

    var canvas = document.getElementById('chart');
    var ctx = canvas.getContext('2d');
    var tooltip = document.getElementById('tooltip');
    var tooltipValue = document.getElementById('tooltipValue');
    var tooltipProfit = document.getElementById('tooltipProfit');

    var hoverX = null;

function setupCanvas() {
  var dpr = window.devicePixelRatio || 1;
  var rect = canvas.getBoundingClientRect();
  
  canvas.width = rect.width * dpr;
  canvas.height = rect.height * dpr;
  ctx.scale(dpr, dpr);
  
  return { width: rect.width, height: rect.height };
}

    function drawChart() {
      const size = setupCanvas();
      const width = size.width;
      const height = size.height;
      const padding = { top: 20, right: 20, bottom: 30, left: 20 };
      const chartWidth = width - padding.left - padding.right;
      const chartHeight = height - padding.top - padding.bottom;

      ctx.clearRect(0, 0, width, height);

      const maxValue = Math.max(...data.map(d => d.value));

      const points = data.map((point, i) => ({
        x: padding.left + (i / (data.length - 1)) * chartWidth,
        y: padding.top + chartHeight - (point.value / maxValue) * chartHeight,
      }));

      // === Area Gradient ===
      const gradient = ctx.createLinearGradient(0, padding.top, 0, padding.top + chartHeight);
      gradient.addColorStop(0, 'rgba(34, 197, 94, 0.25)');
      gradient.addColorStop(1, 'rgba(34, 197, 94, 0)');

      // --- Fill Area (dengan kurva halus mirip drawBalanceChart) ---
      ctx.beginPath();
      ctx.moveTo(points[0].x, chartHeight + padding.top);
      ctx.lineTo(points[0].x, points[0].y);

      for (let i = 0; i < points.length - 1; i++) {
        const p0 = points[i - 1] || points[i];
        const p1 = points[i];
        const p2 = points[i + 1];
        const p3 = points[i + 2] || p2;

        // bezier halus mirip balance chart
        const cp1x = p1.x + (p2.x - p0.x) / 6;
        const cp1y = p1.y + (p2.y - p0.y) / 6;
        const cp2x = p2.x - (p3.x - p1.x) / 6;
        const cp2y = p2.y - (p3.y - p1.y) / 6;

        ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, p2.x, p2.y);
      }

      ctx.lineTo(points[points.length - 1].x, chartHeight + padding.top);
      ctx.closePath();
      ctx.fillStyle = gradient;
      ctx.fill();

      // === Line Smooth ===
      ctx.beginPath();
      ctx.moveTo(points[0].x, points[0].y);

      for (let i = 0; i < points.length - 1; i++) {
        const p0 = points[i - 1] || points[i];
        const p1 = points[i];
        const p2 = points[i + 1];
        const p3 = points[i + 2] || p2;

        const cp1x = p1.x + (p2.x - p0.x) / 6;
        const cp1y = p1.y + (p2.y - p0.y) / 6;
        const cp2x = p2.x - (p3.x - p1.x) / 6;
        const cp2y = p2.y - (p3.y - p1.y) / 6;

        ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, p2.x, p2.y);
      }

      ctx.strokeStyle = '#22c55e';
      ctx.lineWidth = 3;
      ctx.lineJoin = 'round';
      ctx.lineCap = 'round';
      ctx.shadowColor = 'rgba(34, 197, 94, 0.4)';
      ctx.shadowBlur = 8;
      ctx.stroke();
      ctx.shadowBlur = 0;

      // === Points ===
      // points.forEach(point => {
      //   ctx.beginPath();
      //   ctx.arc(point.x, point.y, 3, 0, Math.PI * 2);
      //   ctx.fillStyle = '#22c55e';
      //   ctx.fill();
      //   ctx.strokeStyle = '#0f0f0f';
      //   ctx.lineWidth = 2;
      //   ctx.stroke();
      // });

      // === Hover Line ===
      if (hoverX !== null) {
        ctx.beginPath();
        ctx.strokeStyle = '#22c55e';
        ctx.lineWidth = 1;
        ctx.setLineDash([5, 5]);
        ctx.moveTo(hoverX, padding.top);
        ctx.lineTo(hoverX, padding.top + chartHeight);
        ctx.stroke();
        ctx.setLineDash([]);
      }
    }

    canvas.addEventListener('mousemove', function(e) {
      var rect = canvas.getBoundingClientRect();
      var x = e.clientX - rect.left;
      var y = e.clientY - rect.top;
      
      var padding = { top: 20, right: 20, bottom: 30, left: 20 };
      var chartWidth = rect.width - padding.left - padding.right;
      var chartHeight = rect.height - padding.top - padding.bottom;
      
      if (x >= padding.left && x <= rect.width - padding.right &&
          y >= padding.top && y <= rect.height - padding.bottom) {
        
        var relativeX = x - padding.left;
        var index = Math.round((relativeX / chartWidth) * (data.length - 1));
        
        if (index >= 0 && index < data.length) {
          var maxValue = Math.max.apply(Math, data.map(function(d) { return d.value; }));
          var pointX = padding.left + (index / (data.length - 1)) * chartWidth;
          var pointY = padding.top + chartHeight - (data[index].value / maxValue) * chartHeight;
          
          hoverX = pointX;
          
          tooltipValue.textContent = data[index].value + ' trades';
          tooltipProfit.textContent = '+$' + data[index].profit.toLocaleString();
          
          tooltip.style.left = pointX + 'px';
          tooltip.style.top = (pointY - 70) + 'px';
          tooltip.classList.add('active');
          
          drawChart();
        }
      } else {
        hoverX = null;
        tooltip.classList.remove('active');
        drawChart();
      }
    });

    canvas.addEventListener('mouseleave', function() {
      hoverX = null;
      tooltip.classList.remove('active');
      drawChart();
    });

    window.addEventListener('resize', drawChart);
    
    drawChart();
  </script>
</body>
</html>